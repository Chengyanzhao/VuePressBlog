(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{365:function(n,e,t){"use strict";t.r(e);var i=t(1),r=Object(i.a)({},function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"content"},[n._m(0),n._v(" "),t("p",[n._v("nginx大家应该都不会陌生，作为一个高性能的HTTP和反向代理服务器，nginx被许多大厂使用。作为一个伪前端，必然也得懂点，不然没法出去要饭吃。")]),n._v(" "),n._m(1),n._v(" "),t("p",[n._v("nginx现在已经又跨平台的多版本，由于所在公司多使用windows server，所以先写nginx for windows，后期接触到再将其他平台的补全。")]),n._v(" "),n._m(2),n._v(" "),t("ol",[t("li",[n._v("下载Windows版本的nginx,"),t("a",{attrs:{href:"http://nginx.org/en/download.html",target:"_blank",rel:"noopener noreferrer"}},[n._v("下载地址"),t("OutboundLink")],1),n._v("，直接将压缩包内容解压至安装目录即可。")]),n._v(" "),t("li",[n._v("配置环境变量。将nginx根目录路径添加至系统环境变量。")])]),n._v(" "),n._m(3),n._v(" "),t("p",[n._v("无论是在Windows平台还是Linux平台，请直接用命令使用nginx，避免引起不必要的麻烦，浪费时间。")]),n._v(" "),n._m(4),n._v(" "),n._m(5),n._v(" "),n._m(6),n._v(" "),n._m(7),n._v(" "),t("ol",[t("li",[n._v("首先在windows服务器上下载"),t("a",{attrs:{href:"http://nginx.org/en/download.html",target:"_blank",rel:"noopener noreferrer"}},[n._v("nginx"),t("OutboundLink")],1),n._v("的windows版本。")]),n._v(" "),t("li",[n._v("配置nginx如下")])]),n._v(" "),n._m(8),t("p",[n._v("** 特点 **")]),n._v(" "),n._m(9)])},[function(){var n=this.$createElement,e=this._self._c||n;return e("h1",{attrs:{id:"nginx"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nginx","aria-hidden":"true"}},[this._v("#")]),this._v(" nginx")])},function(){var n=this.$createElement,e=this._self._c||n;return e("h2",{attrs:{id:"安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装","aria-hidden":"true"}},[this._v("#")]),this._v(" 安装")])},function(){var n=this.$createElement,e=this._self._c||n;return e("h3",{attrs:{id:"nginx-for-windows"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nginx-for-windows","aria-hidden":"true"}},[this._v("#")]),this._v(" nginx for Windows")])},function(){var n=this.$createElement,e=this._self._c||n;return e("ul",[e("li",[e("p",[this._v("配置\n配置文件所在位置为"),e("code",[this._v("nginx根目录/")]),this._v("\n可以参考这里http://www.nginx.cn/76.html")])]),this._v(" "),e("li",[e("p",[this._v("使用")])])])},function(){var n=this.$createElement,e=this._self._c||n;return e("h2",{attrs:{id:"windows"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#windows","aria-hidden":"true"}},[this._v("#")]),this._v(" Windows")])},function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("ol",[t("li",[n._v("启动："),t("code",[n._v("$ start nginx")])]),n._v(" "),t("li",[n._v("重新加载配置文件并重启："),t("code",[n._v("$ nginx -s reload")])]),n._v(" "),t("li",[n._v("重新打开日志文件："),t("code",[n._v("$ nginx -s reopen")])]),n._v(" "),t("li",[n._v("快速停止nginx："),t("code",[n._v("$ nginx -s stop")])]),n._v(" "),t("li",[n._v("完整有序的停止nginx："),t("code",[n._v("$ nginx -s quit")])])])},function(){var n=this.$createElement,e=this._self._c||n;return e("p",[e("strong",[this._v("出错/遇到的问题")]),e("br"),this._v("\n问题1:"),e("code",[this._v('error: CreateFile() "D:\\software\\nginx-1.13.9/logs/nginx.pid" failed (2: The system cannot find the file specified)')]),this._v("等无法找到nginx.pid文件的错误。"),e("br"),this._v("\n解决办法：先执行"),e("code",[this._v("$ nginx -c D:/software/nginx-1.13.9/conf/nginx.conf")]),this._v("，再执行启动。")])},function(){var n=this.$createElement,e=this._self._c||n;return e("h2",{attrs:{id:"windows服务器部署"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#windows服务器部署","aria-hidden":"true"}},[this._v("#")]),this._v(" windows服务器部署")])},function(){var n=this.$createElement,e=this._self._c||n;return e("div",{staticClass:"language-config extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v('worker_processes  1; ## 默认CPU核心数\nevents {\n    worker_connections  65535;\n}\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n    sendfile        on;\n    keepalive_timeout  65;\n    gzip  on;\n    # upstream项与server中proxy_pass配置对应实现分布式。\n    upstream a.com {\n        server 192.168.1.1:3000;  # 服务器1 默认多个服务器的权重相同，可设置 weight=3设置权重\n        server 192.168.1.2:3000;  # 服务器2\n        keepalive 64;\n    }\n    server {\n        listen       80;\n        server_name  127.0.0.1;\n        location / {\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n            proxy_set_header Host  $http_host;\n            proxy_set_header X-Nginx-Proxy true;\n            proxy_set_header Connection "";\n            proxy_pass http://a.com;\n            proxy_redirect default;\n            proxy_connect_timeout 1;        # 超时时间 default = 65 单位s\n            proxy_read_timeout 1;\n            proxy_send_timeout 1;\n        }\n        error_page   500 502 503 504  /50x.html;\n        location = /50x.html {\n            root   html;\n        }\n    }\n}\n')])])])},function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("ol",[t("li",[n._v("一个Nginx入口，自动实现静态资源负载均衡。")]),n._v(" "),t("li",[n._v("增加服务器时，只需要再"),t("code",[n._v("upstream")]),n._v("中增加真实服务地址即可。")]),n._v(" "),t("li",[n._v("健康监测机制：nginx根据预先设置的权重来转发请求，若某个服务器出现宕机情况，达到超时时间，nginx会自动切换其他服务器获取资源。为了保证响应速度需要将超时时间设置的短一些，默认65s。所以proxy_connect_timeout设置为1秒，若A服务器崩溃，则1秒后去B服务器查找资源。")]),n._v(" "),t("li",[n._v("多台服务器上的资源名称需要一致，否则会出现资源不匹配的情况。")])])}],!1,null,null,null);e.default=r.exports}}]);